# Internals of Docker


1. Internals of Docker

    1. **Docker Engine**
        <details>
        <summary></summary>
        Runtime(that allows build, run, and manage containers). Its a client-server application with following components -

        - Docker daemon (server)(dockerd, containerd, runc )
        - Docker CLI (client)
        - Docker API (interface)
        </details>
    2. **Docker Images**:
        
        <details>
        <summary></summary>
         read-only templates that your Docker containers are based on. A blueprint for Docker containers. They are built from a set of instructions written in a Dockerfile.
         </details>

    3. **Docker Containers**: 
        <details>
        <summary></summary>

        - A runnable instance of a Docker image.
        - You can start, stop, move, or delete a container using the Docker API or CLI.
        - You can connect a container to one or more networks, attach storage to it, or even create a new image based on its current state.

        </details>

    4. **Dockerfile**: step-by-step instructions on how to build your Docker image.

    5. **Docker Compose**
        <details>
        <summary></summary>

        - Tool for defining and running multi-container Docker applications. 
        - With Compose, you use a YAML file to configure your application's services, and then with a single command, you create and start all the services from your configuration.

        </details>
    6. **Docker Networking**: 
        <details>
        <summary></summary>

         - allows containers to communicate with each other and with other systems
         - Bridge, host, none

        </details>

    
    7. **Docker Storage**: 

        Container Layer, Volumes, Bind mounts, tmpfs Mounts
        <details>
        <summary></summary>

         - Container Layer : writable layer on top of the image layers, any changes made to running container are written to rthis layer and the data is persisted if container is stopped but deleted if container is removed

         - Volumes:  
            - preferred way to persist data generated by and used by Docker containers.
            - shared and reused among containers.
            - Volumes are stored in a part of the host filesystem which is managed by Docker (/var/lib/docker/volumes/ on Linux)
        - Bind mounts: 
            - stored anywhere on the host system
            - file or directory on the host machine that is mounted into a container.
        - tmpfs Mounts: 
            -  Reside in memory or swap space
            -  used for data that does not require persistence over restarts like temp files etc. 
            - remain in host memory and is never stored in host file system.  
         </details>
    
    8. Cgroups and namespaces.

        Linux kerner features that enables to achieve isolation.


        - Cgroups (Control Groups)

            <details>
            <summary></summary>

            - Resource management for isolation
            - Linux kernel feature that limits, accounts for, and isolates the CPU, memory, disk I/O, and network usage of one or more processes
            </details>

        - Namespaces 
            <details>
            <summary></summary>

            - PID, Network, mount, Interprocess Communication namespace, User namespace , UTS namespace(hostname and domain name)
            </details>
            
    9. How does Docker work on non-Linux systems?

        <details>
        <summary></summary>

        - on Mac 
            - Linux VM managed by HyperKit hypervisor 
            - Docker Desktop -> Linux VM -> Docker daemon 
        - on Windows
           1. Linux Containers on Windows - uses a Hyper-V Hypervison Linux VM to run Docker containers (similar to how Docker Desktop for Mac works)
           2. Windows Containers - windows based container images, don't require any VM
        </details>


[Back to Topics](../containers/0.%20what_are_we_going_to_talk_about.md)

[Prev](../containers/1.Intro_to_containerization.md)

[Next](../containers/3.Aws_ecs.md)